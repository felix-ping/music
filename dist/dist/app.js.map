{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./javascripts/tab.js","webpack:///./javascripts/constants.js","webpack:///./javascripts/helpers.js","webpack:///./javascripts/search.js","webpack:///./javascripts/lazyload.js","webpack:///./javascripts/toplist.js","webpack:///./javascripts/slider.js","webpack:///./javascripts/recommend.js","webpack:///./javascripts/progress_bar.js","webpack:///./javascripts/lyrics_player.js","webpack:///./javascripts/music_player.js","webpack:///./javascripts/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","document","addEventListener","event","target","dataset","role","forEach","parentElement","children","tab","classList","remove","add","content","querySelector","view","child","style","display","window","dispatchEvent","Event","SEARCH_URL","LYRICS_URL","songUrl","mid","Promise","res","rej","callback","e","vkey","data","items","src","concat","script","createElement","body","appendChild","Search","el","_classCallCheck","this","$el","$input","onKeyUp","$songs","page","songs","keyword","perpage","nomore","fetching","onscroll","onScroll","_createClass","trim","reset","keyCode","search","removeEventListener","pageYOffset","documentElement","clientHeight","scrollHeight","innerHTML","_this","loading","fetch","arguments","length","undefined","searchUrl","then","json","song","curpage","list","message","append","done","catch","html","map","artist","singer","join","songid","songmid","songname","albummid","interval","insertAdjacentHTML","lazyload","images","imgs","slice","querySelectorAll","observer","IntersectionObserver","entries","entry","intersectionRatio","loadImage","unobserve","threshold","img","observe","func","wait","prev","timer","fn","curr","Date","now","diff","clearTimeout","setTimeout","throttle","filter","contains","_img$getBoundingClien","getBoundingClientRect","top","left","right","bottom","vpWidth","clientWidth","vpHeight","inViewport","image","Image","onload","TopList","toplist_classCallCheck","toplist_createClass","topList","render","_this2","item","picUrl","replace","topTitle","songlist","songList","singername","Slider","options","slider_classCallCheck","slides","duration","index","start","slider_createClass","$wrap","firstElementChild","transitionDuration","width","slide","link","setInterval","next","transform","Recommend","recommend_classCallCheck","recommend_createClass","renderSlider","slider","renderRadios","radioList","renderPlayLists","linkUrl","radios","radio","Ftitle","playlists","songListDesc","ProgressBar","progress_bar_classCallCheck","elapsed","progress","$progress","$elapsed","$duration","innerText","formatTime","progress_bar_createClass","pause","intervalId","update","clearInterval","seconds","mins","Math","floor","secs","LyricsPlayer","audio","lyrics_player_classCallCheck","$lines","$audio","text","lyrics","lyrics_player_createClass","round","currentTime","getSeconds","y","LINE_HEIGHT","line","$active","formatText","match","p1","p2","div","MusicPlayer","music_player_classCallCheck","createAudio","music_player_createClass","id","random","play","restart","matches","onPlay","onPause","hide","console","log","coverUrl","albumCoverUrl","backgroundImage","className","lyricsUrl","lyric","show","player","launch","onHashChange","hash","location","test","indexOf","reduce","cur","arr","split","decodeURIComponent"],"mappings":"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","file":"./dist/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","document.addEventListener('click', function(event) {\n  \n  let target = event.target\n\n  if (target.dataset.role !== 'tab') return\n\n  [].forEach.call(target.parentElement.children, tab => {\n    tab.classList.remove('active')\n  })\n  target.classList.add('active')\n    \n  let content = document.querySelector(target.dataset.view)\n\n  if (content) {\n    [].forEach.call(content.parentElement.children, child => {\n      child.style.display = 'none'\n    })\n    content.style.display = 'block'\n  }\n\n  window.dispatchEvent(new Event('scroll'))\n\n})","export const RECOMMEND_URL = 'https://qq-music-api.now.sh'\nexport const TOPLIST_URL = 'https://qq-music-api.now.sh/top'\nexport const SEARCH_URL = 'https://qq-music-api.now.sh/search'\nexport const LYRICS_URL = 'https://qq-music-api.now.sh/lyrics'","import { LYRICS_URL, SEARCH_URL } from './constants.js'\n\nexport function songUrl(mid) {\n  return new Promise((res, rej) => {\n    function getGuid() {\n      let t = (new Date).getUTCMilliseconds();\n      return Math.round(2147483647 * Math.random()) * t % 1e10;\n    }\n    // let guid = getGuid()\n    let guid = 9962061892\n    window.callback = function(e) {\n      let vkey = e.data.items[0].vkey\n      let src = `http://dl.stream.qqmusic.qq.com/C400${mid}.m4a?guid=${guid}&vkey=${vkey}&uin=0&fromtag=38`\n      res(src)\n    }\n    let script = document.createElement('script')\n    script.src = 'https://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg?g_tk=1278911659&hostUin=0&format=jsonp&callback=callback&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq&needNewCode=0&cid=205361747&uin=0&songmid=' + mid + '&filename=C400' + mid + '.m4a&guid=' + guid\n    document.body.appendChild(script)\n  })\n}\nexport function lyricsUrl(songid) {\n  return `${LYRICS_URL}?id=${songid}`\n}\n\nexport function albumCoverUrl(id) {\n  return `https://y.gtimg.cn/music/photo_new/T002R150x150M000${id}.jpg`\n}\n\nexport function searchUrl(keyword, page = 1) {\n  return `${SEARCH_URL}?keyword=${keyword}&page=${page}`\n}\n\n\n","import { searchUrl } from './helpers.js'\n\nexport class Search {\n  constructor(el) {\n    this.$el = el\n    this.$input = this.$el.querySelector('#search')\n    this.$input.addEventListener('keyup', this.onKeyUp.bind(this))\n    this.$songs = this.$el.querySelector('.song-list')\n    this.page = 1\n    this.songs = {}\n    this.keyword = ''\n    this.perpage = 20\n    this.nomore = false\n    this.fetching = false\n    this.onscroll = this.onScroll.bind(this)\n    window.addEventListener('scroll', this.onscroll)\n  }\n\n  onKeyUp(event) {\n    let keyword = event.target.value.trim()\n    if (!keyword) return this.reset()\n    if (event.keyCode !== 13) return\n    this.search(keyword)\n  }\n\n  onScroll(event) {\n    if (this.nomore) return window.removeEventListener('scroll', this.onscroll)\n    if (pageYOffset + document.documentElement.clientHeight > document.body.scrollHeight - 50) {\n      this.search(this.keyword, this.page + 1)\n    }\n  }\n\n  reset() {\n    this.page = 1\n    this.songs = {}\n    this.keyword = ''\n    this.nomore = false\n    this.$songs.innerHTML = ''\n  }\n\n  search(keyword, page) {\n    if (this.keyword === keyword && this.songs[page || this.page]) return\n    if (this.nomore || this.fetching) return\n    if (this.keyword !== keyword) this.reset()\n    this.keyword = keyword\n    this.loading()\n    fetch(searchUrl(this.keyword, page || this.page))\n      .then(res => res.json())\n      .then(json => {\n        this.page = json.data.song.curpage\n        this.songs[this.page] = json.data.song.list\n        this.nomore = json.message === 'no results'\n        return json.data.song.list\n      })\n      .then(songs => this.append(songs))\n      .then(() => this.done())\n      .catch(() => this.fetching = false)\n  }\n\n  append(songs) {\n    let html = songs.map(song => {\n      let artist = song.singer.map(s => s.name).join(' ')\n      return `\n        <a class=\"song-item\"\n          href=\"#player?artist=${artist}&songid=${song.songid}&songmid=${song.songmid}&songname=${song.songname}&albummid=${song.albummid}&duration=${song.interval}\">\n          <i class=\"icon icon-music\"></i>\n          <div class=\"song-name ellipsis\">${song.songname}</div>\n          <div class=\"song-artist ellipsis\">${artist}</div>\n        </a>`}).join('')\n    this.$songs.insertAdjacentHTML('beforeend', html)\n  }\n\n  loading() {\n    this.fetching = true\n    this.$el.querySelector('.search-loading').classList.add('show')\n  }\n\n  done() {\n    this.fetching = false\n    if (this.nomore) {\n      this.$el.querySelector('.loading-icon').style.display = 'none'\n      this.$el.querySelector('.loading-text').style.display = 'none'\n      this.$el.querySelector('.loading-done').style.display = 'block'\n      this.$el.querySelector('.search-loading').classList.add('show')\n    } else {\n      this.$el.querySelector('.search-loading').classList.remove('show')\n    }\n  }\n  \n}","export function lazyload(images) {\n  let imgs = [].slice.call(images || document.querySelectorAll('.lazyload'))  // Array.from(images)\n\n  if ('IntersectionObserver' in window) {\n    let observer = new IntersectionObserver(function(entries) {\n      entries.forEach(entry => {\n        if (entry.intersectionRatio > 0) {\n          loadImage(entry.target, () => {\n            observer.unobserve(entry.target)\n          })\n        }\n      })\n    }, { threshold: 0.01 })\n  \n    imgs.forEach(img => observer.observe(img))\n  } else {\n    let onscroll = throttle(function() {\n      if (imgs.length === 0) {\n        return window.removeEventListener('scroll', onscroll)\n      }\n      imgs = imgs.filter(img => img.classList.contains('lazyload'))\n      imgs.forEach(img => inViewport(img) && loadImage(img))\n    }, 300)\n  \n    window.addEventListener('scroll', onscroll)\n    window.dispatchEvent(new Event('scroll'))\n  }\n}\n\nfunction throttle(func, wait) {\n  let prev, timer\n  return function fn() {\n    let curr = Date.now()\n    let diff = curr - prev\n    if (!prev || diff >= wait) {\n      func()\n      prev = curr\n    } else if (diff < wait) {\n      clearTimeout(timer)\n      timer = setTimeout(fn, wait - diff)\n    }\n  }\n}\n\nfunction inViewport(img) {\n  let { top, left, right, bottom } = img.getBoundingClientRect()\n  let vpWidth = document.documentElement.clientWidth\n  let vpHeight = document.documentElement.clientHeight\n  return (\n    (top > 0 && top < vpHeight || bottom > 0 && bottom < vpHeight) &&\n    (left > 0 && left < vpWidth || right > 0 && right < vpWidth)\n  )\n}\n\nfunction loadImage(img, callback) {\n  let image = new Image()\n  image.src = img.dataset.src\n  image.onload = function() {\n    img.src = image.src\n    img.classList.remove('lazyload')\n    if (typeof callback === 'function') callback()\n  }\n}","import { lazyload } from './lazyload.js' \nimport { TOPLIST_URL } from './constants.js'\n\nexport class TopList {\n  constructor(el) {\n    this.$el = el\n  }\n\n  launch() {\n    fetch(TOPLIST_URL)\n      .then(res => res.json())\n      .then(json => this.list = json.data.topList)\n      .then(() => this.render())\n    return this\n  }\n\n  render() {\n    this.$el.querySelector('.toplist').innerHTML = this.list.map(item => \n      `<li class=\"top-item\">\n        <div class=\"top-item-media\">\n          <a href=\"#\">\n            <img class=\"lazyload\" data-src=\"${item.picUrl.replace('http://', 'https://')}\">\n          </a>\n        </div>\n        <div class=\"top-item-info\">\n          <h3 class=\"top-item-title ellipsis\">${item.topTitle}</h3>\n          <ul class=\"top-item-list\">${this.songlist(item.songList)}</ul>\n        </div>\n      </li>`).join('')\n\n    lazyload(this.$el.querySelectorAll('.lazyload'))\n  }\n\n  songlist(songs) {\n    return songs.map((song, i) => \n      `<li class=\"top-item-song\">\n        <i class=\"song-index\">${i + 1}</i>\n        <span class=\"song-name\">${song.songname}</span>- ${song.singername}\n      </li>`).join('')\n  }\n}","export class Slider {\n  constructor(options = {}) {\n    this.$el = options.el\n    this.slides = options.slides\n    this.interval = options.interval || 3000\n    this.duration = options.duration || 300\n    this.index = 0\n    this.render()\n    this.start()\n  }\n\n  render() {\n    this.$el.innerHTML = `<div class=\"qq-slider-wrap\"></div>`\n    this.$wrap = this.$el.firstElementChild\n    this.$wrap.style.transitionDuration = `${this.duration}ms`\n    this.$wrap.style.width = `${this.slides.length * 100}%`\n    this.$wrap.innerHTML = this.slides.map(slide =>\n      `<div class=\"qq-slider-item\">\n          <a href=\"${slide.link}\">\n            <img src=\"${slide.image}\">\n          </a>\n      </div>`\n    ).join('')\n  }\n\n  start() {\n    setInterval(this.next.bind(this), this.interval)\n  }\n\n  next() {\n    this.index += 1\n    if (this.index === this.slides.length) {\n      this.$wrap.style.transform = `translate(0)`\n      this.index = 0\n      return\n    }\n    this.$wrap.style.transform = `translate(-${this.index * 100 / this.slides.length}%)`\n  }\n}","import { Slider } from './slider.js'\nimport { lazyload } from './lazyload.js'\nimport { RECOMMEND_URL } from './constants.js'\n\nexport class Recommend {\n  constructor(el) {\n    this.$el = el\n  }\n\n  launch() {\n    fetch(RECOMMEND_URL)\n      .then(res => res.json())\n      .then(json => this.json = json)\n      .then(() => this.render())\n    return this\n  }\n\n  render() {\n    this.renderSlider(this.json.data.slider)\n    this.renderRadios(this.json.data.radioList)\n    this.renderPlayLists(this.json.data.songList)\n    lazyload()\n  }\n\n  renderSlider(slides) {\n    this.slider = new Slider({\n      el: this.$el.querySelector('#slider'),\n      slides: slides.map(slide => ({ \n        link: slide.linkUrl.replace('http://', 'https://'), \n        image: slide.picUrl.replace('http://', 'https://')\n      }))\n    })\n  }\n\n  renderRadios(radios) {\n    this.$el.querySelector('.radios .list').innerHTML = radios.map(radio => \n      `<div class=\"list-item\">\n        <div class=\"list-media\">\n          <img class=\"lazyload\" data-src=\"${radio.picUrl}\">\n          <span class=\"icon icon-play\"></span>\n        </div>\n        <div class=\"list-detail\">\n          <h3 class=\"list-title\">${radio.Ftitle}</h3>\n        </div>\n      </div>`).join('')\n  }\n\n  renderPlayLists(playlists) {\n    this.$el.querySelector('.playlists .list').innerHTML = playlists.map(list =>\n      `<div class=\"list-item\">\n        <div class=\"list-media\">\n          <img class=\"lazyload\" data-src=\"${list.picUrl}\">\n          <span class=\"icon icon-play\"></span>\n        </div>\n        <div class=\"list-detail\">\n          <h3 class=\"list-title\">${list.songListDesc}</h3>\n          <div class=\"list-text\"></div>\n        </div>\n      </div>`).join('')\n  }\n}","export class ProgressBar {\n  constructor(el, duration, start) {\n    this.$el = el\n    this.elapsed = 0\n    this.duration = duration || 0\n    this.progress = 0\n    this.render()\n    this.$progress = this.$el.querySelector('.progress-bar-progress')\n    this.$elapsed = this.$el.querySelector('.progress-elapsed')\n    this.$duration = this.$el.querySelector('.progress-duration')\n    this.$elapsed.innerText = this.formatTime(this.elapsed)\n    this.$duration.innerText = this.formatTime(this.duration)\n    if (start) this.start()\n  }\n\n  start() {\n    this.pause()\n    this.intervalId = setInterval(this.update.bind(this), 50)\n  }\n\n  pause() {\n    clearInterval(this.intervalId)\n  }\n\n  update() {\n    this.elapsed += 0.05\n    if (this.elapsed >= this.duration) this.reset()\n    this.progress = this.elapsed / this.duration\n    this.$progress.style.transform = `translate(${this.progress * 100 - 100}%)`\n    this.$elapsed.innerText = this.formatTime(this.elapsed)\n  }\n\n  reset(duration) {\n    this.pause()\n    this.elapsed = 0\n    this.progress = 0\n    this.$progress.style.transform = `translate(-100%)`\n    this.$elapsed.innerText = this.formatTime(this.elapsed)\n    if (duration) {\n      this.duration = +duration\n      this.$duration.innerText = this.formatTime(this.duration)\n    }\n  }\n\n  restart() {\n    this.reset()\n    this.start()\n  }\n\n  render() {\n    this.$el.innerHTML = `\n      <div class=\"progress-time progress-elapsed\"></div>\n        <div class=\"progress-bar\">\n          <div class=\"progress-bar-progress\"></div>\n        </div>\n      <div class=\"progress-time progress-duration\"></div>\n    `\n  }\n\n  formatTime(seconds) {\n    let mins = Math.floor(seconds / 60)\n    let secs = Math.floor(seconds % 60)\n    if (mins < 10) mins = '0' + mins\n    if (secs < 10) secs = '0' + secs\n    return `${mins}:${secs}`\n  }\n}","export class LyricsPlayer {\n  constructor(el, audio) {\n    this.$el = el\n    this.$el.innerHTML = '<div class=\"player-lyrics-lines\"></div>'\n    this.$lines = this.$el.querySelector('.player-lyrics-lines')\n    this.$audio = audio\n    this.text = ''\n    this.index = 0\n    this.lyrics = []\n    this.elapsed = 0\n    this.reset(this.text)\n  }\n\n  start() {\n    this.pause()\n    this.intervalId = setInterval(this.update.bind(this), 1000)\n  }\n\n  pause() {\n    clearInterval(this.intervalId)\n  }\n\n  update() {\n    this.elapsed = Math.round(this.$audio ? this.$audio.currentTime : this.elapsed + 1)\n    if (this.index === this.lyrics.length - 1) return\n    for (let i = this.index + 1; i < this.lyrics.length; i++) {\n      let seconds = this.getSeconds(this.lyrics[i])\n      if (\n        this.elapsed === seconds &&\n        (!this.lyrics[i + 1] || this.elapsed < this.getSeconds(this.lyrics[i + 1]))\n      ) {\n        this.$lines.children[this.index].classList.remove('active')\n        this.$lines.children[i].classList.add('active')\n        this.index = i\n        break\n      }\n    }\n    if (this.index > 2) {\n      let y = -(this.index - 2) * this.LINE_HEIGHT\n      this.$lines.style.transform = `translateY(${y}px)`\n    }\n  }\n\n  render() {\n    let html = this.lyrics.map(line => `\n      <div class=\"player-lyrics-line\">${line.slice(10)}</div>\n    `).join('')\n    this.$lines.innerHTML = html\n  }\n\n  reset(text) {\n    this.pause()\n    this.index = 0\n    this.elapsed = 0\n    \n    this.$lines.style.transform = `translateY(0)`\n    let $active = this.$lines.querySelector('.active')\n    if ($active) {\n      $active.classList.remove('active')\n    }\n\n    if (text) {\n      this.text = this.formatText(text) || ''\n      this.lyrics = this.text.match(/^\\[\\d{2}:\\d{2}.\\d{2}\\](.+)$/gm) || []\n      if (this.lyrics.length) this.render()\n    }\n\n    if (this.lyrics.length) {\n      this.$lines.children[this.index].classList.add('active')\n    }\n  }\n\n  restart() {\n    this.reset()\n    this.start()\n  }\n\n  getSeconds(line) {\n    return +line.replace(/^\\[(\\d{2}):(\\d{2}).*/, (match, p1, p2) => 60 * (+p1) + (+p2))\n  }\n\n  formatText(text) {\n    let div = document.createElement('div')\n    div.innerHTML = text\n    return div.innerText\n  }\n}\n\nLyricsPlayer.prototype.LINE_HEIGHT = 42","import { ProgressBar } from './progress_bar.js'\nimport { LyricsPlayer } from './lyrics_player.js'\nimport { songUrl, lyricsUrl, albumCoverUrl } from './helpers.js'\n\nexport class MusicPlayer {\n  constructor(el) {\n    this.$el = el\n    this.$el.addEventListener('click', this)\n    this.$audio = this.createAudio()\n    this.lyrics = new LyricsPlayer(this.$el.querySelector('.player-lyrics'), this.$audio)\n    this.progress = new ProgressBar(this.$el.querySelector('.progress'))\n    this.fetching = false\n  }\n\n  createAudio() {\n    let audio = document.createElement('audio')\n    audio.id = `player-${Math.floor(Math.random() * 100)}-${+new Date()}`\n    audio.addEventListener('ended', () => {\n      this.$audio.play()\n      this.lyrics.restart()\n      this.progress.restart()\n    })\n    document.body.appendChild(audio)\n    return audio\n  }\n\n  handleEvent(event) {\n    let target = event.target\n    switch (true) {\n      case target.matches('.icon-play'):\n        this.onPlay(event)\n        break\n      case target.matches('.icon-pause'):\n        this.onPause(event)\n        break\n      case target.matches('.icon-list'):\n        this.hide()\n        break\n    }\n  }\n\n  onPlay(event) {\n    if (this.fetching) return\n    if (this.$audio.src){\n    console.log(this.$audio.src)\n    this.$audio.play()\n    this.lyrics.start()\n    this.progress.start()\n    event.target.classList.add('icon-pause')\n    event.target.classList.remove('icon-play')\n    } else {return}\n  }\n\n  onPause(event) {\n    this.$audio.pause()\n    this.lyrics.pause()\n    this.progress.pause()\n    event.target.classList.add('icon-play')\n    event.target.classList.remove('icon-pause')\n  }\n\n  play(options = {}) {\n    if (!options) return\n    \n    this.$el.querySelector('.song-name').innerText = options.songname\n    this.$el.querySelector('.song-artist').innerText = options.artist\n    this.progress.reset(options.duration)\n    \n    let coverUrl = albumCoverUrl(options.albummid)\n    this.$el.querySelector('.album-cover').src = coverUrl\n    this.$el.querySelector('.player-background').style.backgroundImage = `url(${coverUrl})`\n\n    if (options.songid) {\n      if (this.songid !== options.songid) {\n        this.$el.querySelector('.icon-action').className = 'icon-action icon-play'\n      }\n      \n      this.songid = options.songid\n      console.log(333,songUrl(options.songmid).then())\n      songUrl(options.songmid).then((src) => {this.$audio.src = src})\n      this.fetching = true\n      fetch(lyricsUrl(this.songid))\n        .then(res => res.json())\n        .then(json => json.lyric)\n        .then(text => this.lyrics.reset(text))\n        .catch(() => {})\n        .then(() => this.fetching = false)\n    }\n    \n    this.show()\n  }\n\n  show() {\n    this.$el.classList.add('show')\n    document.body.classList.add('noscroll')\n  }\n\n  hide() {\n    this.$el.classList.remove('show')\n    document.body.classList.remove('noscroll')\n  }\n}","import './tab.js'\nimport { Search } from './search.js'\nimport { TopList } from './toplist.js'\nimport { Recommend } from './recommend.js'\nimport { MusicPlayer } from './music_player.js'\n\nlet search = new Search(document.querySelector('#search-view'))\nlet player = new MusicPlayer(document.querySelector('#player'))\nlet toplist = new TopList(document.querySelector('#rank-view')).launch()\nlet recommend = new Recommend(document.querySelector('#rec-view')).launch()\n\ndocument.querySelector('.show-player').addEventListener('click', () => {\n  player.show()\n})\n\nonHashChange()\naddEventListener('hashchange', onHashChange)\n\nfunction onHashChange() {\n  let hash = location.hash\n  if (/^#player\\?.+/.test(hash)) {\n    let matches = hash.slice(hash.indexOf('?') + 1).match(/(\\w+)=([^&]+)/g)\n    let options = matches && matches.reduce((res, cur) => {\n      let arr = cur.split('=')\n      res[arr[0]] = decodeURIComponent(arr[1])\n      return res\n    }, {})\n    player.play(options)\n  } else {\n    player.hide()\n  }\n}"],"sourceRoot":""}