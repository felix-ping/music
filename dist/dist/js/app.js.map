{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./javascripts/tab.js","webpack:///./javascripts/constants.js","webpack:///./javascripts/helpers.js","webpack:///./javascripts/search.js","webpack:///./javascripts/lazyload.js","webpack:///./javascripts/toplist.js","webpack:///./javascripts/slider.js","webpack:///./javascripts/recommend.js","webpack:///./javascripts/progress_bar.js","webpack:///./javascripts/lyrics_player.js","webpack:///./javascripts/music_player.js","webpack:///./javascripts/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","document","addEventListener","event","target","dataset","role","forEach","parentElement","children","tab","classList","remove","add","content","querySelector","view","child","style","display","window","dispatchEvent","Event","SEARCH_URL","LYRICS_URL","songUrl","mid","Promise","res","rej","guid","Date","getUTCMilliseconds","Math","round","random","getGuid","callback","e","vkey","data","items","src","concat","script","createElement","body","appendChild","Search","el","_classCallCheck","this","$el","$input","onKeyUp","$songs","page","songs","keyword","perpage","nomore","fetching","onscroll","onScroll","_createClass","trim","reset","keyCode","search","removeEventListener","pageYOffset","documentElement","clientHeight","scrollHeight","innerHTML","_this","loading","fetch","arguments","length","undefined","searchUrl","then","json","song","curpage","list","message","append","done","catch","html","map","artist","singer","join","songid","songmid","songname","albummid","interval","insertAdjacentHTML","lazyload","images","imgs","slice","querySelectorAll","observer","IntersectionObserver","entries","entry","intersectionRatio","loadImage","unobserve","threshold","img","observe","func","wait","prev","timer","fn","curr","now","diff","clearTimeout","setTimeout","throttle","filter","contains","_img$getBoundingClien","getBoundingClientRect","top","left","right","bottom","vpWidth","clientWidth","vpHeight","inViewport","image","Image","onload","TopList","toplist_classCallCheck","toplist_createClass","topList","render","_this2","item","picUrl","replace","topTitle","songlist","songList","singername","Slider","options","slider_classCallCheck","slides","duration","index","start","slider_createClass","$wrap","firstElementChild","transitionDuration","width","slide","link","setInterval","next","transform","Recommend","recommend_classCallCheck","recommend_createClass","renderSlider","slider","renderRadios","radioList","renderPlayLists","linkUrl","radios","radio","Ftitle","playlists","songListDesc","ProgressBar","progress_bar_classCallCheck","elapsed","progress","$progress","$elapsed","$duration","innerText","formatTime","progress_bar_createClass","pause","intervalId","update","clearInterval","seconds","mins","floor","secs","LyricsPlayer","audio","lyrics_player_classCallCheck","$lines","$audio","text","lyrics","lyrics_player_createClass","currentTime","getSeconds","y","LINE_HEIGHT","line","$active","formatText","match","p1","p2","div","MusicPlayer","music_player_classCallCheck","createAudio","music_player_createClass","id","play","restart","matches","onPlay","onPause","hide","console","log","coverUrl","albumCoverUrl","backgroundImage","className","lyricsUrl","lyric","show","player","launch","onHashChange","hash","location","test","indexOf","reduce","cur","arr","split","decodeURIComponent"],"mappings":"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","file":"./dist/js/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","document.addEventListener('click', function(event) {\n  \n  let target = event.target\n\n  if (target.dataset.role !== 'tab') return\n\n  [].forEach.call(target.parentElement.children, tab => {\n    tab.classList.remove('active')\n  })\n  target.classList.add('active')\n    \n  let content = document.querySelector(target.dataset.view)\n\n  if (content) {\n    [].forEach.call(content.parentElement.children, child => {\n      child.style.display = 'none'\n    })\n    content.style.display = 'block'\n  }\n\n  window.dispatchEvent(new Event('scroll'))\n\n})","export const RECOMMEND_URL = 'https://qq-music-api.now.sh'\nexport const TOPLIST_URL = 'https://qq-music-api.now.sh/top'\nexport const SEARCH_URL = 'https://qq-music-api.now.sh/search'\nexport const LYRICS_URL = 'https://qq-music-api.now.sh/lyrics'","import { LYRICS_URL, SEARCH_URL } from './constants.js'\n\nexport function songUrl(mid) {\n  return new Promise((res, rej) => {\n    function getGuid() {\n      let t = (new Date).getUTCMilliseconds();\n      return Math.round(2147483647 * Math.random()) * t % 1e10;\n    }\n    let guid = getGuid()\n    window.callback = function(e) {\n      let vkey = e.data.items[0].vkey\n      let src = `http://dl.stream.qqmusic.qq.com/C400${mid}.m4a?guid=${guid}&vkey=${vkey}&uin=0&fromtag=38`\n      res(src)\n    }\n    let script = document.createElement('script')\n    script.src = 'https://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg?g_tk=1278911659&hostUin=0&format=jsonp&callback=callback&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq&needNewCode=0&cid=205361747&uin=0&songmid=' + mid + '&filename=C400' + mid + '.m4a&guid=' + guid\n    document.body.appendChild(script)\n  })\n}\n\nexport function lyricsUrl(songid) {\n  return `${LYRICS_URL}?id=${songid}`\n}\n\nexport function albumCoverUrl(id) {\n  return `https://y.gtimg.cn/music/photo_new/T002R150x150M000${id}.jpg`\n}\n\nexport function searchUrl(keyword, page = 1) {\n  return `${SEARCH_URL}?keyword=${keyword}&page=${page}`\n}\n\n\n","import { searchUrl } from './helpers.js'\n\nexport class Search {\n  constructor(el) {\n    this.$el = el\n    this.$input = this.$el.querySelector('#search')\n    this.$input.addEventListener('keyup', this.onKeyUp.bind(this))\n    this.$songs = this.$el.querySelector('.song-list')\n    this.page = 1\n    this.songs = {}\n    this.keyword = ''\n    this.perpage = 20\n    this.nomore = false\n    this.fetching = false\n    this.onscroll = this.onScroll.bind(this)\n    window.addEventListener('scroll', this.onscroll)\n  }\n\n  onKeyUp(event) {\n    let keyword = event.target.value.trim()\n    if (!keyword) return this.reset()\n    if (event.keyCode !== 13) return\n    this.search(keyword)\n  }\n\n  onScroll(event) {\n    if (this.nomore) return window.removeEventListener('scroll', this.onscroll)\n    if (pageYOffset + document.documentElement.clientHeight > document.body.scrollHeight - 50) {\n      this.search(this.keyword, this.page + 1)\n    }\n  }\n\n  reset() {\n    this.page = 1\n    this.songs = {}\n    this.keyword = ''\n    this.nomore = false\n    this.$songs.innerHTML = ''\n  }\n\n  search(keyword, page) {\n    if (this.keyword === keyword && this.songs[page || this.page]) return\n    if (this.nomore || this.fetching) return\n    if (this.keyword !== keyword) this.reset()\n    this.keyword = keyword\n    this.loading()\n    fetch(searchUrl(this.keyword, page || this.page))\n      .then(res => res.json())\n      .then(json => {\n        this.page = json.data.song.curpage\n        this.songs[this.page] = json.data.song.list\n        this.nomore = json.message === 'no results'\n        return json.data.song.list\n      })\n      .then(songs => this.append(songs))\n      .then(() => this.done())\n      .catch(() => this.fetching = false)\n  }\n\n  append(songs) {\n    let html = songs.map(song => {\n      let artist = song.singer.map(s => s.name).join(' ')\n      return `\n        <a class=\"song-item\"\n          href=\"#player?artist=${artist}&songid=${song.songid}&songmid=${song.songmid}&songname=${song.songname}&albummid=${song.albummid}&duration=${song.interval}\">\n          <i class=\"icon icon-music\"></i>\n          <div class=\"song-name ellipsis\">${song.songname}</div>\n          <div class=\"song-artist ellipsis\">${artist}</div>\n        </a>`}).join('')\n    this.$songs.insertAdjacentHTML('beforeend', html)\n  }\n\n  loading() {\n    this.fetching = true\n    this.$el.querySelector('.search-loading').classList.add('show')\n  }\n\n  done() {\n    this.fetching = false\n    if (this.nomore) {\n      this.$el.querySelector('.loading-icon').style.display = 'none'\n      this.$el.querySelector('.loading-text').style.display = 'none'\n      this.$el.querySelector('.loading-done').style.display = 'block'\n      this.$el.querySelector('.search-loading').classList.add('show')\n    } else {\n      this.$el.querySelector('.search-loading').classList.remove('show')\n    }\n  }\n  \n}","export function lazyload(images) {\n  let imgs = [].slice.call(images || document.querySelectorAll('.lazyload'))  // Array.from(images)\n\n  if ('IntersectionObserver' in window) {\n    let observer = new IntersectionObserver(function(entries) {\n      entries.forEach(entry => {\n        if (entry.intersectionRatio > 0) {\n          loadImage(entry.target, () => {\n            observer.unobserve(entry.target)\n          })\n        }\n      })\n    }, { threshold: 0.01 })\n  \n    imgs.forEach(img => observer.observe(img))\n  } else {\n    let onscroll = throttle(function() {\n      if (imgs.length === 0) {\n        return window.removeEventListener('scroll', onscroll)\n      }\n      imgs = imgs.filter(img => img.classList.contains('lazyload'))\n      imgs.forEach(img => inViewport(img) && loadImage(img))\n    }, 300)\n  \n    window.addEventListener('scroll', onscroll)\n    window.dispatchEvent(new Event('scroll'))\n  }\n}\n\nfunction throttle(func, wait) {\n  let prev, timer\n  return function fn() {\n    let curr = Date.now()\n    let diff = curr - prev\n    if (!prev || diff >= wait) {\n      func()\n      prev = curr\n    } else if (diff < wait) {\n      clearTimeout(timer)\n      timer = setTimeout(fn, wait - diff)\n    }\n  }\n}\n\nfunction inViewport(img) {\n  let { top, left, right, bottom } = img.getBoundingClientRect()\n  let vpWidth = document.documentElement.clientWidth\n  let vpHeight = document.documentElement.clientHeight\n  return (\n    (top > 0 && top < vpHeight || bottom > 0 && bottom < vpHeight) &&\n    (left > 0 && left < vpWidth || right > 0 && right < vpWidth)\n  )\n}\n\nfunction loadImage(img, callback) {\n  let image = new Image()\n  image.src = img.dataset.src\n  image.onload = function() {\n    img.src = image.src\n    img.classList.remove('lazyload')\n    if (typeof callback === 'function') callback()\n  }\n}","import { lazyload } from './lazyload.js' \nimport { TOPLIST_URL } from './constants.js'\n\nexport class TopList {\n  constructor(el) {\n    this.$el = el\n  }\n\n  launch() {\n    fetch(TOPLIST_URL)\n      .then(res => res.json())\n      .then(json => this.list = json.data.topList)\n      .then(() => this.render())\n    return this\n  }\n\n  render() {\n    this.$el.querySelector('.toplist').innerHTML = this.list.map(item => \n      `<li class=\"top-item\">\n        <div class=\"top-item-media\">\n          <a href=\"#\">\n            <img class=\"lazyload\" data-src=\"${item.picUrl.replace('http://', 'https://')}\">\n          </a>\n        </div>\n        <div class=\"top-item-info\">\n          <h3 class=\"top-item-title ellipsis\">${item.topTitle}</h3>\n          <ul class=\"top-item-list\">${this.songlist(item.songList)}</ul>\n        </div>\n      </li>`).join('')\n\n    lazyload(this.$el.querySelectorAll('.lazyload'))\n  }\n\n  songlist(songs) {\n    return songs.map((song, i) => \n      `<li class=\"top-item-song\">\n        <i class=\"song-index\">${i + 1}</i>\n        <span class=\"song-name\">${song.songname}</span>- ${song.singername}\n      </li>`).join('')\n  }\n}","export class Slider {\n  constructor(options = {}) {\n    this.$el = options.el\n    this.slides = options.slides\n    this.interval = options.interval || 3000\n    this.duration = options.duration || 300\n    this.index = 0\n    this.render()\n    this.start()\n  }\n\n  render() {\n    this.$el.innerHTML = `<div class=\"qq-slider-wrap\"></div>`\n    this.$wrap = this.$el.firstElementChild\n    this.$wrap.style.transitionDuration = `${this.duration}ms`\n    this.$wrap.style.width = `${this.slides.length * 100}%`\n    this.$wrap.innerHTML = this.slides.map(slide =>\n      `<div class=\"qq-slider-item\">\n          <a href=\"${slide.link}\">\n            <img src=\"${slide.image}\">\n          </a>\n      </div>`\n    ).join('')\n  }\n\n  start() {\n    setInterval(this.next.bind(this), this.interval)\n  }\n\n  next() {\n    this.index += 1\n    if (this.index === this.slides.length) {\n      this.$wrap.style.transform = `translate(0)`\n      this.index = 0\n      return\n    }\n    this.$wrap.style.transform = `translate(-${this.index * 100 / this.slides.length}%)`\n  }\n}","import { Slider } from './slider.js'\nimport { lazyload } from './lazyload.js'\nimport { RECOMMEND_URL } from './constants.js'\n\nexport class Recommend {\n  constructor(el) {\n    this.$el = el\n  }\n\n  launch() {\n    fetch(RECOMMEND_URL)\n      .then(res => res.json())\n      .then(json => this.json = json)\n      .then(() => this.render())\n    return this\n  }\n\n  render() {\n    this.renderSlider(this.json.data.slider)\n    this.renderRadios(this.json.data.radioList)\n    this.renderPlayLists(this.json.data.songList)\n    lazyload()\n  }\n\n  renderSlider(slides) {\n    this.slider = new Slider({\n      el: this.$el.querySelector('#slider'),\n      slides: slides.map(slide => ({ \n        link: slide.linkUrl.replace('http://', 'https://'), \n        image: slide.picUrl.replace('http://', 'https://')\n      }))\n    })\n  }\n\n  renderRadios(radios) {\n    this.$el.querySelector('.radios .list').innerHTML = radios.map(radio => \n      `<div class=\"list-item\">\n        <div class=\"list-media\">\n          <img class=\"lazyload\" data-src=\"${radio.picUrl}\">\n          <span class=\"icon icon-play\"></span>\n        </div>\n        <div class=\"list-detail\">\n          <h3 class=\"list-title\">${radio.Ftitle}</h3>\n        </div>\n      </div>`).join('')\n  }\n\n  renderPlayLists(playlists) {\n    this.$el.querySelector('.playlists .list').innerHTML = playlists.map(list =>\n      `<div class=\"list-item\">\n        <div class=\"list-media\">\n          <img class=\"lazyload\" data-src=\"${list.picUrl}\">\n          <span class=\"icon icon-play\"></span>\n        </div>\n        <div class=\"list-detail\">\n          <h3 class=\"list-title\">${list.songListDesc}</h3>\n          <div class=\"list-text\"></div>\n        </div>\n      </div>`).join('')\n  }\n}","export class ProgressBar {\n  constructor(el, duration, start) {\n    this.$el = el\n    this.elapsed = 0\n    this.duration = duration || 0\n    this.progress = 0\n    this.render()\n    this.$progress = this.$el.querySelector('.progress-bar-progress')\n    this.$elapsed = this.$el.querySelector('.progress-elapsed')\n    this.$duration = this.$el.querySelector('.progress-duration')\n    this.$elapsed.innerText = this.formatTime(this.elapsed)\n    this.$duration.innerText = this.formatTime(this.duration)\n    if (start) this.start()\n  }\n\n  start() {\n    this.pause()\n    this.intervalId = setInterval(this.update.bind(this), 50)\n  }\n\n  pause() {\n    clearInterval(this.intervalId)\n  }\n\n  update() {\n    this.elapsed += 0.05\n    if (this.elapsed >= this.duration) this.reset()\n    this.progress = this.elapsed / this.duration\n    this.$progress.style.transform = `translate(${this.progress * 100 - 100}%)`\n    this.$elapsed.innerText = this.formatTime(this.elapsed)\n  }\n\n  reset(duration) {\n    this.pause()\n    this.elapsed = 0\n    this.progress = 0\n    this.$progress.style.transform = `translate(-100%)`\n    this.$elapsed.innerText = this.formatTime(this.elapsed)\n    if (duration) {\n      this.duration = +duration\n      this.$duration.innerText = this.formatTime(this.duration)\n    }\n  }\n\n  restart() {\n    this.reset()\n    this.start()\n  }\n\n  render() {\n    this.$el.innerHTML = `\n      <div class=\"progress-time progress-elapsed\"></div>\n        <div class=\"progress-bar\">\n          <div class=\"progress-bar-progress\"></div>\n        </div>\n      <div class=\"progress-time progress-duration\"></div>\n    `\n  }\n\n  formatTime(seconds) {\n    let mins = Math.floor(seconds / 60)\n    let secs = Math.floor(seconds % 60)\n    if (mins < 10) mins = '0' + mins\n    if (secs < 10) secs = '0' + secs\n    return `${mins}:${secs}`\n  }\n}","export class LyricsPlayer {\n  constructor(el, audio) {\n    this.$el = el\n    this.$el.innerHTML = '<div class=\"player-lyrics-lines\"></div>'\n    this.$lines = this.$el.querySelector('.player-lyrics-lines')\n    this.$audio = audio\n    this.text = ''\n    this.index = 0\n    this.lyrics = []\n    this.elapsed = 0\n    this.reset(this.text)\n  }\n\n  start() {\n    this.pause()\n    this.intervalId = setInterval(this.update.bind(this), 1000)\n  }\n\n  pause() {\n    clearInterval(this.intervalId)\n  }\n\n  update() {\n    this.elapsed = Math.round(this.$audio ? this.$audio.currentTime : this.elapsed + 1)\n    if (this.index === this.lyrics.length - 1) return\n    for (let i = this.index + 1; i < this.lyrics.length; i++) {\n      let seconds = this.getSeconds(this.lyrics[i])\n      if (\n        this.elapsed === seconds &&\n        (!this.lyrics[i + 1] || this.elapsed < this.getSeconds(this.lyrics[i + 1]))\n      ) {\n        this.$lines.children[this.index].classList.remove('active')\n        this.$lines.children[i].classList.add('active')\n        this.index = i\n        break\n      }\n    }\n    if (this.index > 2) {\n      let y = -(this.index - 2) * this.LINE_HEIGHT\n      this.$lines.style.transform = `translateY(${y}px)`\n    }\n  }\n\n  render() {\n    let html = this.lyrics.map(line => `\n      <div class=\"player-lyrics-line\">${line.slice(10)}</div>\n    `).join('')\n    this.$lines.innerHTML = html\n  }\n\n  reset(text) {\n    this.pause()\n    this.index = 0\n    this.elapsed = 0\n    \n    this.$lines.style.transform = `translateY(0)`\n    let $active = this.$lines.querySelector('.active')\n    if ($active) {\n      $active.classList.remove('active')\n    }\n\n    if (text) {\n      this.text = this.formatText(text) || ''\n      this.lyrics = this.text.match(/^\\[\\d{2}:\\d{2}.\\d{2}\\](.+)$/gm) || []\n      if (this.lyrics.length) this.render()\n    }\n\n    if (this.lyrics.length) {\n      this.$lines.children[this.index].classList.add('active')\n    }\n  }\n\n  restart() {\n    this.reset()\n    this.start()\n  }\n\n  getSeconds(line) {\n    return +line.replace(/^\\[(\\d{2}):(\\d{2}).*/, (match, p1, p2) => 60 * (+p1) + (+p2))\n  }\n\n  formatText(text) {\n    let div = document.createElement('div')\n    div.innerHTML = text\n    return div.innerText\n  }\n}\n\nLyricsPlayer.prototype.LINE_HEIGHT = 42","import { ProgressBar } from './progress_bar.js'\nimport { LyricsPlayer } from './lyrics_player.js'\nimport { songUrl, lyricsUrl, albumCoverUrl } from './helpers.js'\n\nexport class MusicPlayer {\n  constructor(el) {\n    this.$el = el\n    this.$el.addEventListener('click', this)\n    this.$audio = this.createAudio()\n    this.lyrics = new LyricsPlayer(this.$el.querySelector('.player-lyrics'), this.$audio)\n    this.progress = new ProgressBar(this.$el.querySelector('.progress'))\n    this.fetching = false\n  }\n\n  createAudio() {\n    let audio = document.createElement('audio')\n    audio.id = `player-${Math.floor(Math.random() * 100)}-${+new Date()}`\n    audio.addEventListener('ended', () => {\n      this.$audio.play()\n      this.lyrics.restart()\n      this.progress.restart()\n    })\n    document.body.appendChild(audio)\n    return audio\n  }\n\n  handleEvent(event) {\n    let target = event.target\n    switch (true) {\n      case target.matches('.icon-play'):\n        this.onPlay(event)\n        break\n      case target.matches('.icon-pause'):\n        this.onPause(event)\n        break\n      case target.matches('.icon-list'):\n        this.hide()\n        break\n    }\n  }\n\n  onPlay(event) {\n    if (this.fetching) return\n    if (this.$audio.src){\n    console.log(this.$audio.src)\n    this.$audio.play()\n    this.lyrics.start()\n    this.progress.start()\n    event.target.classList.add('icon-pause')\n    event.target.classList.remove('icon-play')\n    } else {return}\n  }\n\n  onPause(event) {\n    this.$audio.pause()\n    this.lyrics.pause()\n    this.progress.pause()\n    event.target.classList.add('icon-play')\n    event.target.classList.remove('icon-pause')\n  }\n\n  play(options = {}) {\n    if (!options) return\n    \n    this.$el.querySelector('.song-name').innerText = options.songname\n    this.$el.querySelector('.song-artist').innerText = options.artist\n    this.progress.reset(options.duration)\n    \n    let coverUrl = albumCoverUrl(options.albummid)\n    this.$el.querySelector('.album-cover').src = coverUrl\n    this.$el.querySelector('.player-background').style.backgroundImage = `url(${coverUrl})`\n\n    if (options.songid) {\n      if (this.songid !== options.songid) {\n        this.$el.querySelector('.icon-action').className = 'icon-action icon-play'\n      }\n      \n      this.songid = options.songid\n      console.log(333,songUrl(options.songmid).then())\n      songUrl(options.songmid).then((src) => {this.$audio.src = src})\n      this.fetching = true\n      fetch(lyricsUrl(this.songid))\n        .then(res => res.json())\n        .then(json => json.lyric)\n        .then(text => this.lyrics.reset(text))\n        .catch(() => {})\n        .then(() => this.fetching = false)\n    }\n    \n    this.show()\n  }\n\n  show() {\n    this.$el.classList.add('show')\n    document.body.classList.add('noscroll')\n  }\n\n  hide() {\n    this.$el.classList.remove('show')\n    document.body.classList.remove('noscroll')\n  }\n}","import './tab.js'\nimport { Search } from './search.js'\nimport { TopList } from './toplist.js'\nimport { Recommend } from './recommend.js'\nimport { MusicPlayer } from './music_player.js'\n\nlet search = new Search(document.querySelector('#search-view'))\nlet player = new MusicPlayer(document.querySelector('#player'))\nlet toplist = new TopList(document.querySelector('#rank-view')).launch()\nlet recommend = new Recommend(document.querySelector('#rec-view')).launch()\n\ndocument.querySelector('.show-player').addEventListener('click', () => {\n  player.show()\n})\n\nonHashChange()\naddEventListener('hashchange', onHashChange)\n\nfunction onHashChange() {\n  let hash = location.hash\n  if (/^#player\\?.+/.test(hash)) {\n    let matches = hash.slice(hash.indexOf('?') + 1).match(/(\\w+)=([^&]+)/g)\n    let options = matches && matches.reduce((res, cur) => {\n      let arr = cur.split('=')\n      res[arr[0]] = decodeURIComponent(arr[1])\n      return res\n    }, {})\n    player.play(options)\n  } else {\n    player.hide()\n  }\n}"],"sourceRoot":""}